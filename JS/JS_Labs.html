<!DOCTYPE html>
<html>
<head>
	<title>Лабы</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="set.css">
</head>
<body>
	<div class="var">
		<p>Вариант 22</p>
	</div>
	<div class="menuall">

		<div>
			<button onclick="toggleContent(1); showDateTime();">Лабораторная 1</button>
			<div class="content" id="content1"></div>
		</div>

		<div>
			<button onclick="toggleContent(2)">Лабораторная 2</button>
			<div class="content" id="content2">
				<table id="calendar">
					<thead>
					<tr><td>‹<td colspan="5"><td>› 
					<tr><td>Пн<td>Вт<td>Ср<td>Чт<td>Пт<td>Сб<td>Вс
					<tbody>
				</table>
			</div>
		</div>

		<div>
			<button onclick="toggleContent(3)">Лабораторная 3</button>
			<div class="content" id="content3">
				<p>Получить список таблиц в DOM-дереве и вывести их количество</p>
				<h3>Количество таблиц: <span id="task3">0</span></h3>	
				<script>
					setTimeout(function () {
						domTreeTables = document.getElementsByTagName("TABLE");
						task3h3 = document.getElementById("task3");
						task3h3.textContent = domTreeTables.length;
						console.log(domTreeTables.length);
					}, 1000);
				</script>	
			</div>	  
		</div>

		<div>
			<button onclick="toggleContent(4)">Лабораторная 4</button>
			<div class="content" id="content4">
				<div style="background-color: #000;"    class="square"></div>
				<div style="background-color: #ff0000;" class="square"></div>
				<div style="background-color: #00ff0d;" class="square"></div>
				<div style="background-color: #0011ff;" class="square"></div>
				<div style="background-color: #ff04de;" class="square"></div>
				<div style="background-color: #ffe600;" class="square"></div>
				<button style="background-color: rgb(173, 11, 11); height:30px;
				width: 300px;" onclick="startTimer()"> Удалить </button>
			</div>
			<script>
			function hideRandomSquare() {
				var squares = document.getElementsByClassName("square");
				var randomIndex =  Math.floor(Math.random() * squares.length);
				var square = squares[randomIndex];
				square.remove();
			}

			function startTimer() {
				setTimeout(hideRandomSquare, 120);
			}
			</script>
		</div>

		<div>
			<button onclick="toggleContent(5)">Лабораторная 5</button>
			<div class="content" id="content5">
				<h1>Список элементов</h1>
				<ul id="myList">

				</ul>
				<button style="background-color: rgb(16, 173, 11); height:30px;
				width: 300px; " onclick="addElement()">Добавить элемент</button>
				<button style="background-color: rgb(255, 0, 0); height:30px;
				width: 300px; " onclick="removeElement()">Удалить элемент</button>
			</div>
			<script>
				const list = document.getElementById('myList');

				function addElement() {
					const content = prompt('Введите содержимое нового элемента');

					if (!content) {
						return;
					}

					const newItem = document.createElement('li');
					newItem.textContent = content;
					list.appendChild(newItem);
				}

				function removeElement() {
					const selected = document.querySelector('li.selected');

					if (!selected) {
						alert('Выберите элемент для удаления');
						return;
					}	
					
					const confirmation = confirm(`Вы уверены, что хотите удалить элемент "${selected.textContent}"?`);
					if (!confirmation) {
						return;
					}

					list.removeChild(selected);
				}

				list.addEventListener('click', (event) => {
						const target = event.target;
						if (target.tagName !== 'LI') {
							return;
					}

					// Если элемент уже выбран, снимаем выделение
					const selected = document.querySelector('li.selected');
					if (selected) {
						selected.classList.remove('selected');
					}

					target.classList.add('selected');
				});

			</script>
		</div>

		<div>
			<button onclick="toggleContent(6)">Лабораторная 6</button>
			<div class="content" id="content6">
				<table class ="mytable" id="myTable">
					<tr>
					  <td></td>
					  <td></td>
					  <td></td>
					  <td></td>
					</tr>
					<tr>
					  <td></td>
					  <td></td>
					  <td></td>
					  <td></td>
					</tr>
					<tr>
					  <td></td>
					  <td></td>
					  <td></td>
					  <td></td>
					</tr>
					<tr>
					  <td></td>
					  <td></td>
					  <td></td>
					  <td></td>
					</tr>
				</table>
			</div>
			<script>
				let table = document.getElementById("myTable");
			
				for (let i = 0; i < table.rows.length; i++) {
					for (let j = 0; j < table.rows[i].cells.length; j++) {
						table.rows[i].cells[j].addEventListener("click", function() {
							let text = prompt("Введите текст для ячейки:");
							if (text !== null) {
							this.innerHTML = text;
							}
						});
					}
				}
			</script>
		</div>

		<div>
			<button onclick="toggleContent(7)">Лабораторная 7</button>
			<div class="content" id="content7">
				<div class="menu cand">
					<h3 class="title">СЛАДОСТИ</h3>
					<ul id="list7">
						<li>Печенье</li>
						<li>Шоколад</li>
						<li>Конфета</li>
						<li>Леденец</li>
					</ul>
				<h3 id="end7">СЛАДОСТИ КОНЧИЛИСЬ</h3>
				</div>
			</div>
			<script>
				function remove(link) {
					link.parentNode.parentNode.removeChild(link.parentNode);
				}

				let endtext = document.getElementById("end7");
				endtext.style.visibility = "hidden";
		
				let menuElement = document.querySelector(".cand");
				let titleElement = menuElement.querySelector(".title");
				
				titleElement.onclick = function () {
				  menuElement.classList.toggle("hidden");
				};
		
				document.addEventListener("DOMContentLoaded", function () {
				  const itemsList = document.getElementById("list7");
		
				  itemsList.addEventListener("click", function (event) {
					let target = event.target;
					if (target.tagName === "LI") {
					  target.classList.add("fading");
					  setTimeout(() => {
						target.remove();
					  }, 100);
					}
					
					if (itemsList.childElementCount == 1) {
						setTimeout(()=>{
							endtext.style.visibility = "visible";
							endtext.classList.add("fading_out");
						},120);
					}
				  });
				});
			  </script>
		</div>

		<div>
			<button onclick="toggleContent(8)">Лабораторная 8</button>
			<div class="content" id="content8">
				<div class="task8container">
					<h3 class="task8text">ку)</h3>
					<img class="task8img" id="task8nig" src="img/task8.jpg" alt="niggers" />
				</div>
			</div>
		</div>

		
		<!-- <div>
			<button onclick="toggleContent(9)">Лабораторная 9</button>
			<div class="content" id="content9">
				<div style="display: block; font-size: 17px;">Форма на прием в NullExp</div>
				< onsubmit="return false;" 
				<form id="task9-form" > 
					<input type="text" id="email1" placeholder="E-mail">
					<input type="password" id="password1" placeholder="Пароль">

					<p class = "check" style="font-size: 17px;">Какие языки вы знаете?</p>
					<label class="language"><input type="checkbox" name="languages" value="Django"> C#</label>
					<label class="language"><input type="checkbox" name="languages" value="Flask"> Dart</label>
					<label class="language"><input type="checkbox" name="languages" value="Pyramid"> Python</label>
					<label class="language"><input type="checkbox" name="languages" value="FastAPI"> Swift</label>
 
					<p style="display: block; font-size: 17px;" for="professions">Выберите вашу профессию:</p>
					<select style="display: block; font-size: 17px;" id="professions" name="professions">
						<option value="developer">WEB-дизайнер</option>
						<option value="designer">Front-end</option>
						<option value="manager">Back-end</option>
						<option value="writer">Люблю виджеты</option>
						<option value="other">Другое</option>
					</select>

					<p style="display: block; font-size: 19px;">Расскажите немного о себе?</p>
					<textarea style="display: block; font-size: 17px;" rows="4" cols="50" scrolling="auto"></textarea>

					<button type="submit">Зарегистрироваться</button>
					<button type="button" id="clear-button">Очистить</button>
				</form>
				<script>
					const clearBtn = document.querySelector('#clear-button');
					const inputFields = document.querySelectorAll('input');

					clearBtn.addEventListener('click', function() {
						inputFields.forEach(input => input.value = '');
					});

					const email = document.getElementById("email1");
					const password = document.getElementById("password1");
					const languages = document.getElementsByName("languages");

					email.addEventListener("input", () => {
						if (email.value.indexOf("@") > 0) {
							email.classList.remove("error");
						} else {
							email.style.color = "red";
							email.classList.add("error");
						}
					});

					password.addEventListener("input", () => {
						if (password.value.length < 5) {
							password.classList.remove("error");
						} else {	
							password.style.color = "red";
							password.classList.add("error");
						}
					});	

					languages.forEach(language => {
						language.addEventListener("input", () => {
							if (language.checked) {
								language.parentNode.classList.remove("error");
							} else {
								language.style.color = "red";
								language.parentNode.classList.add("error");
							}
						});
					});

				</script>
			</div>
		</div>  -->
		
		<div>
			<button onclick="toggleContent(10)">Лабораторная 9 + 10</button>
			<div class="content" id="content10">
				<div style="display: block; font-size: 17px;">Форма на прием в NullExp</div>
				<!-- onsubmit="return false;" -->
				<form id="task9-form" > 
					<input type="text" id="fio" placeholder="ФИО (отчество, если имеется)">
					<label id="FioErr" style="color:red; display:none">Неверный формат ФИО</label>
					<input type="text" id="email2" placeholder="E-mail">
					<label id="MailErr" style="color:red; display:none">Неверный формат почты</label>
					<input type="password" id="password2" placeholder="Пароль">
					<label id="PassErr" style="color:red; display:none">Неверный формат пароля</label>
					<input type="password" id="password3" placeholder="Подтвердите пароль">
					<label id="ConfPassErr" style="color:red; display:none">Пароли не совпадают</label>
					<input type="phone" id="phone" placeholder="Номер телефона">
					<label id="PhoneErr" style="color:red; display:none ">Неверный формат телефона</label><br>
					<label for="birthday">Дата рождения:</label><br>
					<input type="date" id="birthday" name="birthday">
					<label id="birthErr" style="color:red; display:none">Неверный формат даты</label>

					<p class = "check" style="font-size: 17px;">Какие языки вы знаете?</p>
					<label class="language"><input type="checkbox" name="languages" value="C#"> C#</label>
					<label class="language"><input type="checkbox" name="languages" value="Dart"> Dart</label>
					<label class="language"><input type="checkbox" name="languages" value="Python"> Python</label>
					<label class="language"><input type="checkbox" name="languages" value="Swift"> Swift</label>

					<p class="check_gen" style="font-size: 17px;">Пол</p>
					<label class="language"><input type="radio" name="gender" value="male"> М</label>
					<label class="language"><input type="radio" name="gender" value="female"> Ж</label>

					<p style="display: block; font-size: 17px;" for="professions">Выберите вашу профессию:</p>
					<select style="display: block; font-size: 17px;" id="professions" name="professions" onchange="showOtherInput()">
						<option value="developer">WEB-дизайнер</option>
						<option value="designer">Front-end</option>
						<option value="manager">Back-end</option>
						<option value="writer">Люблю виджеты</option>
						<option value="other">Другое</option>
					</select>

					<div id="other-input" style="display: none;">
						<label style="display: block; font-size: 17px;  margin-bottom: 20px;" for="other-profession">Напишите свою профессию:</label>
						<input style="display: block; font-size: 17px;  margin-bottom: 20px;" type="text" id="other-profession" name="other-profession">
					</div>

					<p style="display: block; font-size: 19px;">Расскажите немного о себе:</p>
					<textarea id="AboutMe" style="display: block; font-size: 17px;" rows="4" cols="50" scrolling="auto"  placeholder="Личная характеристика"></textarea>

					<button type="submit">Зарегистрироваться</button>
					<button type="button" id="clear-button">Очистить</button>
				</form>
				<script>
					const fioInput = document.querySelector('#fio');

					fioInput.addEventListener('input', function(event) {
						const fioRegex = /^(?!Якухнов Роман)[А-ЯЁ][а-яё]+ [А-ЯЁ][а-яё]+( [А-ЯЁ][а-яё]+)?$/;;
						const fioValue = event.target.value.trim();
						const fioErr = document.querySelector('#FioErr');

						if (fioRegex.test(fioValue)) {
							fioInput.style.borderColor = '#ccc';
							fioErr.style.display = "none";
							fioInput.classList.remove('error');
						} else {
							fioInput.style.borderColor = 'red';
							fioErr.style.display = "block";
							fioInput.classList.add('error');
						}
					});

					document.querySelector('#email2').addEventListener('input', function(event) {
						const emailInput = event.target;
						const emailValue = emailInput.value;
						const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
						const MailErr = document.querySelector('#MailErr');

						if (emailRegex.test(emailValue)) {
							emailInput.style.borderColor = '#ccc';
							MailErr.style.display = "none";
							emailInput.classList.remove('error');
						} else {
							emailInput.style.borderColor = 'red';
							MailErr.style.display = "block";
							emailInput.classList.add('error');
						}
					});

					document.querySelector('#password2').addEventListener('input', function(event) {
						const passwordInput = event.target;
						const passwordValue = passwordInput.value;
						const passwordRegex = /^(?=.*\d).{8,}$/;
						const PassErr= document.querySelector('#PassErr');

						if (passwordRegex.test(passwordValue)) {
							passwordInput.style.borderColor = '#ccc';
							PassErr.style.display = "none";
							passwordInput.classList.remove('error');
						} else {
							passwordInput.style.borderColor = 'red';
							PassErr.style.display = "block";
							passwordInput.classList.add('error');
						}
					});

					document.querySelector('#password3').addEventListener('input', function(event) {
						const passwordConfirmInput = event.target;
						const passwordConfirmValue = passwordConfirmInput.value;
						const passwordValue = document.querySelector('#password2').value;
						const ConfPassErr = document.querySelector('#ConfPassErr');

						if (passwordConfirmValue === passwordValue) {
							passwordConfirmInput.style.borderColor = '#ccc';
							ConfPassErr.style.display = "none";
							passwordConfirmInput.classList.remove('error');
						} else {
							passwordConfirmInput.style.borderColor = 'red';
							ConfPassErr.style.display = "block";
							passwordConfirmInput.classList.add('error');
						}
					});

					document.querySelector('#phone').addEventListener('input', function(event) {
						const phoneInput = event.target;
						const phoneValue = phoneInput.value;
						const phoneRegex = /^(\+7)?\s?(\(\d{3}\)|\d{3})\s?\d{3}(-|\s)?\d{2}(-|\s)?\d{2}$/;
						const PhoneErr = document.querySelector('#PhoneErr');

						if (phoneRegex.test(phoneValue)) {
							phoneInput.style.borderColor = '#ccc';
							PhoneErr.style.display = "none";
							phoneInput.classList.remove('error');
						} else {
							phoneInput.style.borderColor = 'red';
							PhoneErr.style.display = "block";
							phoneInput.classList.add('error');
						}
					});

					const birthdayInput = document.getElementById('birthday');

					birthdayInput.addEventListener('change', function(event) {
						const birthdayValue = new Date(event.target.value);
						const minDate = new Date('1950-01-01');
						const maxDate = new Date('2023-12-31');
						const birthErr = document.querySelector('#birthErr');

						if (birthdayValue < minDate || birthdayValue > maxDate) {
							birthdayInput.style.borderColor = 'red';
							birthErr.style.display = "block";
						} else {
							birthErr.style.display = "none";
							birthdayInput.style.borderColor = '#ccc';
						}
					});

					const languageCheckboxes = document.querySelectorAll('input[type="checkbox"][name="languages"]');
					const languagesTitle = document.querySelector('.check');

					document.querySelector('#task9-form').addEventListener('submit', function(event) {
						let isLanguageSelected = false;

						for (const checkbox of languageCheckboxes)
						{
							if (checkbox.checked) {
								isLanguageSelected = true;
								break;
							}
						}

						if (isLanguageSelected) {
							languagesTitle.style.color = 'black';
							languagesTitle.classList.remove('error');
						} else {
							languagesTitle.style.color = 'red';
							languagesTitle.classList.add('error');
							event.preventDefault();
						}
					});

					const genderRadios = document.querySelectorAll('input[type="radio"][name="gender"]');
					const genderTitle = document.querySelector('.check_gen');

					document.querySelector('#task9-form').addEventListener('submit', function(event) {
						let isGenderSelected = false;

						for (const radio of genderRadios) {
							if (radio.checked) {
								isGenderSelected = true;
								break;
							}
						}

						if (!isGenderSelected) {
							event.preventDefault();
							genderTitle.style.color = 'red';
						}
					});

					function showOtherInput() {
						const select = document.getElementById("professions");
						const otherInput = document.getElementById("other-input");
						if (select.value === "other") {
							otherInput.style.display = "block";
						} else {
							otherInput.style.display = "none";
						}
					}

					const clearBtn2 = document.querySelector('#clear-button');
					const inputFields2 = document.querySelectorAll('input');

					clearBtn2.addEventListener('click', function() {
						const emailInput = document.querySelector('#email2');
						const passwordInput = document.querySelector('#password2');
						const passwordConfirmInput = document.querySelector('#password3');
						const phoneInput = document.querySelector('#phone');
						const AboutMe = document.getElementById('AboutMe');
						const checkboxes = document.querySelectorAll('input[type="checkbox"]');
						const radios = document.querySelectorAll('input[type="radio"]');

						checkboxes.forEach(checkbox => {
							checkbox.checked = false;
						});
						radios.forEach(radio => {
							radio.checked = false;
						});
						inputFields2.forEach(input => input.value = '');
						fioInput.style.borderColor = '#ccc';
						emailInput.style.borderColor = '#ccc';
						passwordInput.style.borderColor = '#ccc';
						passwordConfirmInput.style.borderColor = '#ccc';
						phoneInput.style.borderColor = '#ccc';
						birthdayInput.style.borderColor = '#ccc';
						languagesTitle.style.color = 'black';
						genderTitle.style.color = 'black';
						AboutMe.value = '';
					});

				</script>
			</div>
		</div>
		<div>
			<button onclick="toggleContent(11)">Лабораторная 11</button>
			<div class="content" id="content11">
				<canvas id="game" width="608" height="608"></canvas>
			</div>
		</div>

	</div>
	<script>
		function toggleContent(id)
		{
			var content = document.getElementById("content" + id);
			if (content.style.display === "none") {
				content.style.display = "block";
			} else {
				content.style.display = "none";
			}
		}
		
		//Task1
        function showDateTime(){
            let now = new Date();
			//год с незначащими нулями
			let year = now.getFullYear();
			let month = (now.getMonth() + 1).toString().padStart(2, '0');
			let day = now.getDate().toString().padStart(2, '0');
			let daysOfWeek = ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'];
			let day_week = daysOfWeek[now.getDay()];
			let status_date = `${day_week}, ${year}-${day}-${month}`;
			//время с нулями	
			let hours = now.getHours().toString().padStart(2, '0');
			let minutes = now.getMinutes().toString().padStart(2, '0');
			let seconds = now.getSeconds().toString().padStart(2, '0');
			let status_time = `${hours}:${minutes}:${seconds}`;

			let content1 = document.getElementById("content1");
			content1.innerHTML = status_date + ' ' + status_time;
			setInterval(showDateTime, 1000);
        }

		//Task2
		function Сalendar(id, year, month) 
        {
            var Dlast = new Date(year,month+1,0).getDate(),
                D = new Date(year,month,Dlast),
                DNlast = new Date(D.getFullYear(),D.getMonth(),Dlast).getDay(),
                DNfirst = new Date(D.getFullYear(),D.getMonth(),1).getDay(),
                calendar = '<tr>',
                month=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];
            if (DNfirst != 0) 
            {
                for(var  i = 1; i < DNfirst; i++) 
                    calendar += '<td>';
            } 
            else {
                for(var  i = 0; i < 6; i++) 
                    calendar += '<td>';
            }
            // определим сегодня
            for(var  i = 1; i <= Dlast; i++) 
            {
                if (i == new Date().getDate() && D.getFullYear() == new Date().getFullYear() && D.getMonth() == new Date().getMonth()) {
                        calendar += '<td class="today">' + i;
                } else {
                    calendar += '<td>' + i;
                }
                
                if (new Date(D.getFullYear(),D.getMonth(),i).getDay() == 0) {
                    calendar += '<tr>';
                }
            }
            
            for(var  i = DNlast; i < 7; i++) 
                calendar += '<td>&nbsp;'; //неразрывный пробел. чтоб красиво было где пусто 

            document.querySelector('#'+id+' tbody').innerHTML = calendar;
            document.querySelector('#'+id+' thead td:nth-child(2)').innerHTML = month[D.getMonth()] +' '+ D.getFullYear();
            document.querySelector('#'+id+' thead td:nth-child(2)').dataset.month = D.getMonth();
            document.querySelector('#'+id+' thead td:nth-child(2)').dataset.year = D.getFullYear();

            if (document.querySelectorAll('#'+id+' tbody tr').length < 6) 
            {  
                document.querySelector('#'+id+' tbody').innerHTML += '<tr><td>&nbsp;<td>&nbsp;<td>&nbsp;<td>&nbsp;<td>&nbsp;<td>&nbsp;<td>&nbsp;';
            }
			
			// переключатель минус месяц
			document.querySelector('#calendar thead tr:nth-child(1) td:nth-child(1)').onclick = function() 
			{
				Сalendar("calendar", document.querySelector('#calendar thead td:nth-child(2)').dataset.year, parseFloat(document.querySelector('#calendar thead td:nth-child(2)').dataset.month)-1);
			}
			// переключатель плюс месяц
			document.querySelector('#calendar thead tr:nth-child(1) td:nth-child(3)').onclick = function() 
			{
				Сalendar("calendar", document.querySelector('#calendar thead td:nth-child(2)').dataset.year, parseFloat(document.querySelector('#calendar thead td:nth-child(2)').dataset.month)+1);
			}
    	}
        Сalendar("calendar", new Date().getFullYear(), new Date().getMonth());
		//task 7


		//task 8
		function makehover(obj, opacity_new, mult)
		{
			if (obj.style.opacity <= 1 && obj.style.opacity >= 0) {
				opacity_new = opacity_new - 0.1 * mult;
				obj.style.opacity = opacity_new;
				if (obj.style.opacity > 1) {
				obj.style.opacity = 1;
				}
				if (obj.style.opacity < 0) {
				obj.style.opacity = 0;
				}
			}
		}

		nig = document.getElementById("task8nig");
		hoveredall = false;
		let hov, allhov;

		let mult = -1;
		const isHover = (e) => e.parentElement.querySelector(":hover") === e;

		const myDiv = document.getElementById("task8nig");
		document.addEventListener("mousemove", function checkHover() {
		const hovered = isHover(myDiv);
		if (hovered !== checkHover.hovered) {
			if (hovered) {
			clearInterval(allhov);
			mult = +1;
			hov = setInterval(function () {
				makehover(myDiv, myDiv.style.opacity, mult);
			}, 50);
			} else {
			mult = -1;
			clearInterval(hov);
			allhov = setInterval(function () {
				makehover(myDiv, myDiv.style.opacity, mult);
			}, 50);
			}
			checkHover.hovered = hovered;
			hoveredall = hovered;
		}
		});

		//task 11
		const canvas = document.getElementById("game");
		const ctx = canvas.getContext("2d");

		const ground = new Image();
		ground.src = "img/ground.png";

		const foodImg = new Image();
		foodImg.src = "img/food.png";

		let box = 32;

		let score = 0;

		let food = {
			x: Math.floor((Math.random() * 17 + 1)) * box,
			y: Math.floor((Math.random() * 15 + 3)) * box,
		};

		let snake = [];

		snake[0] = {
			x: 9 * box,
			y: 10 * box
		};

		document.addEventListener("keydown", direction);

		let dir;

		function direction(event) {
			if(event.keyCode == 37 && dir != "right")
				dir = "left";
			else if(event.keyCode == 38 && dir != "down")
				dir = "up";
			else if(event.keyCode == 39 && dir != "left")
				dir = "right";
			else if(event.keyCode == 40 && dir != "up")
				dir = "down";
			}

			function eatTail(head, arr) 
			{
				for(let i = 0; i < arr.length; i++) 
				{
					if(head.x == arr[i].x && head.y == arr[i].y)
					clearInterval(game);
				}
			}

		function drawGame() {
			ctx.drawImage(ground, 0, 0);

			ctx.drawImage(foodImg, food.x, food.y);

			for(let i = 0; i < snake.length; i++) 
			{
				ctx.fillStyle = i == 0 ? "green" : "red";
				ctx.fillRect(snake[i].x, snake[i].y, box, box);
			}

			ctx.fillStyle = "white";
			ctx.font = "50px Arial";
			ctx.fillText(score, box * 2.5, box * 1.7);

			let snakeX = snake[0].x;
			let snakeY = snake[0].y;

			if(snakeX == food.x && snakeY == food.y)
			{
				score++;
				food = {
					x: Math.floor((Math.random() * 17 + 1)) * box,
					y: Math.floor((Math.random() * 15 + 3)) * box,
				};
			} else {
				snake.pop();
			}

			if(snakeX < box || snakeX > box * 17 || snakeY < 3 * box || snakeY > box * 17)
			{
				restartGame();
			}

			if(dir == "left") snakeX -= box;
			if(dir == "right") snakeX += box;
			if(dir == "up") snakeY -= box;
			if(dir == "down") snakeY += box;

			let newHead = {
				x: snakeX,
				y: snakeY
			};
			
			//проверим пересекается ли новая голова с хвостом чтобы ниче не сломалось
			eatTail(newHead, snake);

			snake.unshift(newHead);
			
			function restartGame() 
			{			
				snake.splice(0, snake.length);
				score = 0;

				food.x = Math.floor((Math.random() * 17 + 1)) * box;
				food.y = Math.floor((Math.random() * 15 + 3)) * box;
				
				snake[0] = {
					x: 9 * box,
					y: 10 * box
				};

				snakeX = snake[0].x;
				snakeY = snake[0].y;

				
				newHead = {
					x: snakeX,
					y: snakeY
				};
				setInterval(game);
			}
		}
		let game = setInterval(drawGame, 100);
	</script>
</body>
</html>